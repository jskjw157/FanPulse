# 📋 FanPulse 문서 분석 레포트

## 1. 개요
현재 `docs` 내의 기획서, 화면 정의서, 데이터베이스 정의서를 상호 검토한 결과, 전반적인 구조는 일치하나 **핵심 기능의 구현 방식**과 **데이터 모델링**에서 몇 가지 중요한 불일치가 발견되었습니다.

## 2. 주요 발견 사항 (Discrepancies)

### 🚨 1. 콘서트 예매 프로세스의 불일치 (Critical)
*   **기획서 (Plan)**: "외부 예매 사이트 연결" (단순 링크 제공)로 명시됨.
*   **화면 정의서 (H007, H015)**: 외부 사이트 연결을 언급하지만, **H022 (예매 내역)**에서는 "예매 완료, 취소, 환불, QR 코드"를 보여주는 **내부 예매 시스템**을 전제로 하고 있음.
*   **DB 정의서**: `ticket_reservations` 테이블에 `qr_code`, `status`, `total_price` 등 결제 및 티켓 발급 관련 컬럼이 존재함.
*   **문제점**: 외부 사이트로 넘기는 구조라면 우리 DB에 예매 내역이나 QR 코드를 생성/저장할 수 없습니다. (제휴 API가 없다면 불가능)
*   **제안**:
    *   **A안 (중개 플랫폼)**: 내부 예매 기능을 삭제하고 H022(예매 내역)를 제거하거나 "스크랩/관심 공연"으로 변경.
    *   **B안 (직접 예매)**: 우리가 직접 티켓을 판매하는 구조로 기획을 수정 (PG사 연동 등 복잡도 증가).

### ❓ 2. 투표권(Voting Power) 데이터 모델 부재
*   **화면 정의서 (H004)**: "My Voting Power"를 표시하며 **Daily(매일 지급)**, **Bonus**, **Used**로 구분하고 있음.
*   **DB 정의서**: `users` 테이블이나 `votes` 관련 테이블에 유저의 **"잔여 투표권"**을 관리하는 필드가 없음. `points` 테이블은 존재하나, 이는 굿즈 교환용(Goods)으로 보이며 투표권과 공유되는지 명확하지 않음.
*   **문제점**: 투표권을 제한하거나 유료/광고로 충전하는 로직을 구현할 DB 필드가 없음.
*   **제안**: `user_voting_credits` 테이블을 신설하거나 `users` 테이블에 `daily_votes`, `bonus_votes` 컬럼 추가 필요.

### 📉 3. 게시글 조회수(View Count) 필드 누락
*   **기획서 & 화면**: "인기 게시글(Popular)" 정렬 기능 (H003) 및 "콘텐츠 추천" (기획서 6.3) 언급.
*   **DB 정의서**: MongoDB `posts` 컬렉션에 좋아요(`like_count`), 댓글(`comment_count`)은 있으나 **조회수(`view_count`)** 필드가 없음.
*   **제안**: `posts` 컬렉션에 `view_count` 필드 추가 권장.

### 🔔 4. 알림(Notification) 구조의 단순함
*   **화면 정의서 (H017)**: 알림 유형별 분류(좋아요, 댓글, 투표, 이벤트) 및 클릭 시 해당 화면 이동 필요.
*   **DB 정의서**: `notifications` 테이블에 단순히 `message` (TEXT)만 존재.
*   **제안**: `type` (ENUM: LIKE, COMMENT, VOTE...) 및 `target_id` (UUID, 연결될 리소스 ID) 컬럼이나 JSON 메타데이터 필드를 추가해야 딥링크 구현이 용이함.

### 📝 5. GitHub 프로젝트 관리 문서 및 기타 점검
*   **GitHub_프로젝트_관리.md**:
    *   **크롤링**: 뉴스, 차트, 콘서트(Ticketmaster/Interpark) 크롤링 이슈가 정의됨. 이는 **기획서/크롤링 문서와 일치**.
    *   **티켓 예매**: 외부 크롤링을 통한 정보 제공을 전제하므로, 화면 정의서(H022)의 **"내부 예매 시스템"과 상충**됨을 재확인.
    *   **기술 스택**: 백엔드(Kotlin/Spring), 안드로이드(Compose), iOS(UIKit) 등 기획서와 일치함.
*   **디자인.md**: 내용이 비어 있음 ("추후 작성 예정"). 디자인 가이드 부재로 UI 개발 시 혼선 우려.
*   **시스템 문서(`.agent/rules`, `cc/*.md`)**:
    *   `00-language.md`, `02-thinking.md`: 일반적인 AI 행동 수칙 (준수 중).
    *   **`03-mcp-strategy.md` (중요 발견)**: "Cafe24" 관련 Task Group(TG.API, TG.DESIGN)이 정의되어 있으나, **실제 프로젝트 코드는 Cafe24와 무관함(검색 결과 0건)**. 템플릿이 그대로 복사된 것으로 보이며, 프로젝트 실정에 맞게 수정 필요.
    *   `04-meta-rule.md`: 룰 생성 규칙. Cafe24 감지 로직이 포함되어 있어 오탐지 가능성 또는 템플릿 잔재 확인.

## 3. 검토 요약
| 항목 | 상태 | 설명 |
| :--- | :---: | :--- |
| **기획 vs 화면** | ⚠️ 주의 | 콘서트 예매가 '링크'인지 '직접 예매'인지 정의가 엇갈림 |
| **화면 vs DB** | ⚠️ 주의 | 투표권(Voting Power) 저장소 누락, 알림 구조 단순 |
| **기획 vs DB** | ✅ 양호 | 전반적인 마이크로서비스 및 폴리글랏(RDB+Mongo) 구조 일치 |
| **크롤링 연동** | ✅ 양호 | 크롤링 대상 데이터(뉴스, 차트, 굿즈)에 대한 테이블 설계 완료 |
| **PM 문서** | ✅ 양호 | 개발 마일스톤 및 기술 스택이 기획서와 완전 일치 |
| **디자인 문서** | ❌ 미비 | `디자인.md` 내용 없음. 디자인 시스템 정의 필요 |

위 사항들에 대한 기획 의사결정 및 수정이 필요합니다.
